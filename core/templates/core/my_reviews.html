{% extends 'core/base.html' %}

{% block title %}Mis reseñas{% endblock %}

{% block content%}
{% load replacement %}
{% load static %}
<div class="max-w-screen-md lg:max-w-screen-lg xl:max-w-screen-xl mx-auto xl:px-0 px-4 py-5">
    <div class="flex">
        <div class="menu_account w-[25%] text-sm">
            <a class="flex border-b border-neutral-300" href="{% url 'my_account' %}">
                <div class="mr-1 bg-neutral-400"></div>
                <div class="p-2 w-full">Mi cuenta</div>
            </a>
            <a class="flex border-b border-neutral-300" href="{% url 'my_orders' %}">
                <div class="mr-1 bg-neutral-400"></div>
                <div class="p-2 w-full">Mis pedidos</div>
            </a>
            <a class="flex border-b border-neutral-300" href="{% url 'my_data' %}">
                <div class="mr-1 bg-neutral-400"></div>
                <div class="p-2 w-full">Mis datos</div>
            </a>
            <a class="flex border-b border-neutral-300" href="{% url 'my_favorites' %}">
                <div class="mr-1 bg-neutral-400"></div>
                <div class="p-2 w-full">Mis favoritos</div>
            </a>
            <a class="flex border-b border-neutral-300" href="{% url 'my_reviews' %}">
                <div class="w-[3px] bg-green-600"></div>
                <div class="p-2 w-full">Mis opiniones de productos</div>
            </a>
            <a class="flex border-b border-neutral-300">
                <div class="mr-1 bg-neutral-400"></div>
                <div class="p-2 w-full">Condiciones generales de compra y privacidad</div>
            </a>
        </div>
        
        <div class="w-[75%] pl-8 text-black text-sm relative min-h-[500px]">
            <div class="mb-5 font-semibold text-lg">Mis Reseñas</div>

            {% if request.user.reviews.all %}
            
            <div class="rounded-xl border border-gray-300 mb-6">
                
                <div class="relative">
                    <input value="{{ request.user.reviews.all.count }}" id="num_reviews" class="hidden"></input>
                    {% for review in request.user.reviews.all %}
                        <div class="relative">
                            {% if forloop.counter0 > 0 %}
                            <hr class="w-full border-gray-300">
                            {% endif %}
                            <div class="flex w-full">
                                <a href="{% url 'product' review.product.slug %}" class="w-[140px] rounded-l-xl">
                                    <img class="hover:shadow-lg rounded-l-xl" src="{{review.product.image}}">
                                </a>
                            
                                <div class="w-[80%] pl-2 text-sm flex relative mt-2">
                                    
                                    <div class="item-size w-[40%]">
                                        <div class="px-1">{{review.product.nombre}}</div>
                                        <p class="font-semibold px-1">{{ review.titulo }}</p>
                                        {% include 'product/partials/stars_review_siple.html' %}
                                        <div class="text-xs text-gray-700 px-1 mt-8"><p>{{ review.created_by }}, el {{ review.created_at|date:"d-m-Y" }}</p></div>
                                    </div>
                                    <div class=" w-[60%] mt-5">{{ review.content }}</div>

                                </div>
                                <a href="{% url 'my_review' review.id %}" class="absolute top-5 right-5 hover:text-black hover:scale-105 cursor-pointer">
                                    <svg class="h-6 w-6"  width="24"  height="24"  viewBox="0 0 24 24"  xmlns="http://www.w3.org/2000/svg"  fill="none"  stroke="currentColor"  stroke-width="1.5"  stroke-linecap="round"  stroke-linejoin="round">  <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />  <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" /></svg>
                                </a>
                            </div>
                        </div>
                    {% endfor %} 
                </div>
            </div>
            
            {% else %}
            <div class="mb-2 mt-10 font-semibold">Todavía no tienes ninguna review.</div>
            <div class="mb-4">Empieza a descubrir todos nuestros productos.</div>
            <a href="{% url 'shop' %}"><button class="w-[30%] py-3 bg-green-700 text-white text-base">Ir a la tienda</button></a>
            
            {% endif %}

        </div>
    </div>
</div>






{% endblock %}